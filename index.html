<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Numerology Analysis | Fauzan Tarot</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0f0518;
            --gold-accent: #d4af37;
            --gold-light: #f3e5ab;
            --text-main: #e0e0e0;
            --glass-bg: rgba(20, 5, 30, 0.96);
            --red-karmic: #ff6b6b;
            --blue-cycle: #81a1c1;
        }

        body {
            font-family: 'Lora', serif; display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; background-color: var(--bg-dark); color: var(--text-main); margin: 0; padding: 20px;
        }

        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://i.imgur.com/XMpaq1Z.jpeg');
            background-size: cover; background-position: center; filter: brightness(0.2) blur(8px); z-index: -1;
        }

        .container {
            background-color: var(--glass-bg); padding: 40px; border-radius: 20px;
            border: 1px solid rgba(212, 175, 55, 0.3); max-width: 1000px; width: 100%;
            text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.8); margin-bottom: 50px;
        }

        h1 { font-family: 'Playfair Display', serif; color: var(--gold-accent); margin-bottom: 10px; font-size: 2.2rem;}
        .subtitle { color: #888; font-size: 0.9rem; margin-bottom: 30px; letter-spacing: 1px; }

        /* INPUTS */
        .input-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; text-align: left; margin-bottom: 20px; }
        label { display: block; color: var(--gold-light); margin-bottom: 5px; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
        input { 
            width: 100%; padding: 15px; background: rgba(255,255,255,0.05); 
            border: 1px solid rgba(212, 175, 55, 0.4); border-radius: 8px; 
            color: white; outline: none; box-sizing: border-box;
        }

        button { 
            width: 100%; padding: 20px; background: var(--gold-accent); color: var(--bg-dark); 
            border: none; border-radius: 8px; font-family: 'Playfair Display', serif; font-weight: bold; 
            font-size: 1.2rem; cursor: pointer; transition: 0.3s; margin-top: 10px; letter-spacing: 2px;
        }
        button:hover { background: var(--gold-light); transform: translateY(-2px); }

        /* HASIL */
        .results-container { display: none; text-align: left; margin-top: 50px; animation: fadeIn 1s ease; }
        
        .section-header {
            border-bottom: 1px solid rgba(212,175,55,0.3); padding-bottom: 10px; margin-top: 60px; margin-bottom: 25px;
        }
        .section-header h2 { font-family: 'Playfair Display', serif; color: var(--gold-light); margin: 0; font-size: 1.8rem; }
        .section-header p { margin: 5px 0 0 0; color: #888; font-size: 0.9rem; }

        /* CARD STYLE */
        .result-card {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
            padding: 25px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid var(--gold-accent);
        }
        .head-row { display: flex; align-items: flex-start; gap: 20px; margin-bottom: 15px; }
        .big-num { 
            font-family: 'Playfair Display', serif; font-size: 3.5rem; line-height: 1; 
            color: var(--gold-accent); font-weight: bold; min-width: 60px; text-align: center;
        }
        .title-col h3 { margin: 0; color: var(--gold-light); font-size: 1.2rem; }
        .title-col span { font-size: 0.8rem; color: #aaa; text-transform: uppercase; letter-spacing: 1px; }

        .meaning { font-size: 0.95rem; line-height: 1.7; color: #d0d0d0; }
        
        /* TAGS */
        .tag-area { margin-top: 10px; }
        .tag { display: inline-block; padding: 3px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; margin-right: 5px; }
        .tag-karmic { background: rgba(255, 107, 107, 0.15); color: var(--red-karmic); border: 1px solid var(--red-karmic); }
        .tag-master { background: rgba(212, 175, 55, 0.15); color: var(--gold-accent); border: 1px solid var(--gold-accent); }
        
        .karmic-box {
            margin-top: 15px; padding: 15px; background: rgba(255, 107, 107, 0.05);
            border: 1px dashed var(--red-karmic); border-radius: 8px; color: #ffcccc; font-size: 0.9rem;
        }

        /* TABLE */
        .cycle-table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 0.9rem; }
        .cycle-table th, .cycle-table td { padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left; }
        .cycle-table th { color: var(--gold-light); font-family: 'Playfair Display', serif; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @media(max-width:600px){ .head-row{ flex-direction:column; gap:10px; } .big-num{ text-align:left; } }
    </style>
</head>
<body>

    <a href="index.html" style="color: var(--gold-light); text-decoration: none; align-self: flex-start; margin-bottom: 20px;">← Kembali ke Beranda</a>

    <div class="container">
        <h1>Deep Numerology Profile</h1>
        <div class="subtitle">Analisis Mendalam: Core, Karmic, Bridge & Cycles</div>
        
        <div class="input-grid">
            <div>
                <label>Nama Lengkap (Sesuai Akte)</label>
                <input type="text" id="fullName" placeholder="Nama Lengkap...">
            </div>
            <div>
                <label>Nama Panggilan</label>
                <input type="text" id="nickName" placeholder="Nama Panggilan...">
            </div>
            <div>
                <label>Tanggal Lahir</label>
                <input type="date" id="birthDate">
            </div>
        </div>

        <button onclick="calculateDeepProfile()">BACA ANALISIS SAYA</button>

        <div id="resultArea" class="results-container">
            
            <div class="section-header">
                <h2>1. The Core Numbers (Inti Diri)</h2>
                <p>Fondasi utama kepribadian, tujuan hidup, dan keinginan jiwa Anda.</p>
            </div>

            <div id="coreResults"></div>

            <div class="section-header">
                <h2>2. Bridge & Synthesis (Penyelarasan)</h2>
                <p>Bagaimana menyeimbangkan diri dan arah di usia matang.</p>
            </div>
            <div id="bridgeResults"></div>

            <div class="section-header">
                <h2>3. Karmic Analysis (Analisis Karma)</h2>
                <p>Pelajaran masa lalu dan area yang perlu diperkuat.</p>
            </div>
            <div class="result-card">
                <div class="title-col"><h3>Karmic Lessons (Angka Hilang)</h3></div>
                <div id="lessonsArea" style="margin-top:10px;"></div>
                <div class="meaning" style="margin-top:10px; font-size:0.85rem; color:#aaa;">Angka-angka ini tidak ada dalam nama Anda. Ini menunjukkan area kelemahan yang harus dilatih secara sadar.</div>
            </div>
            <div id="debtResults"></div>

            <div class="section-header">
                <h2>4. Cycles & Timing (Siklus Waktu)</h2>
                <p>Prediksi energi tahunan dan fase kehidupan.</p>
            </div>
            <div id="timingResults"></div>

            <div class="result-card" style="padding:0; overflow:hidden;">
                <table class="cycle-table">
                    <thead>
                        <tr><th>Fase Hidup</th><th>Usia</th><th>Puncak (Pinnacle)</th><th>Tantangan (Challenge)</th></tr>
                    </thead>
                    <tbody id="pinnacleBody"></tbody>
                </table>
            </div>

        </div>
    </div>

    <script>
        // --- DATA INTERPRETASI (DATABASE) ---
        const interpretations = {
            1: {
                keyword: "Pemimpin & Perintis",
                desc: "Energi kemandirian, inisiatif, dan kepemimpinan. Anda didorong untuk berdiri di atas kaki sendiri, orisinal, dan berani mengambil jalan yang berbeda dari orang lain.",
                lesson: "Belajar percaya diri dan tidak bergantung pada orang lain."
            },
            2: {
                keyword: "Diplomat & Pasangan",
                desc: "Energi kerja sama, kepekaan, dan harmoni. Kekuatan Anda terletak pada detail, intuisi, dan kemampuan menyatukan orang. Anda adalah pembawa damai.",
                lesson: "Belajar menetapkan batasan dan tidak terlalu sensitif."
            },
            3: {
                keyword: "Komunikator & Kreator",
                desc: "Energi ekspresi diri, kegembiraan, dan kreativitas. Anda memiliki bakat dalam kata-kata, seni, dan menghibur orang lain. Pesona sosial Anda tinggi.",
                lesson: "Belajar fokus dan tidak menyebarkan energi terlalu tipis."
            },
            4: {
                keyword: "Pembangun & Praktisi",
                desc: "Energi stabilitas, kerja keras, dan sistem. Anda adalah fondasi yang kokoh, disiplin, dan terorganisir. Anda mewujudkan ide menjadi bentuk nyata.",
                lesson: "Belajar fleksibel dan tidak terlalu kaku."
            },
            5: {
                keyword: "Petualang & Pembebas",
                desc: "Energi kebebasan, perubahan, dan adaptabilitas. Anda menyukai variasi, travel, dan pengalaman baru. Rutinitas adalah musuh Anda.",
                lesson: "Belajar disiplin diri dan komitmen."
            },
            6: {
                keyword: "Pengasuh & Harmoni",
                desc: "Energi tanggung jawab, keluarga, dan pelayanan. Anda berorientasi pada rumah, menyembuhkan, dan menjaga keharmonisan komunitas.",
                lesson: "Belajar tidak terlalu mencampuri urusan orang lain (perfeksionisme)."
            },
            7: {
                keyword: "Pencari & Pemikir",
                desc: "Energi analisis, spiritualitas, dan introspeksi. Anda mencari kebenaran terdalam. Anda butuh waktu sendiri untuk mengisi ulang energi.",
                lesson: "Belajar mempercayai intuisi dan terbuka pada orang lain."
            },
            8: {
                keyword: "Eksekutif & Kekuasaan",
                desc: "Energi ambisi, uang, dan otoritas. Anda memiliki bakat manajemen dan visi besar. Tujuan Anda adalah kesuksesan materi yang seimbang.",
                lesson: "Belajar menyeimbangkan materi dan spiritual."
            },
            9: {
                keyword: "Humanis & Penutup",
                desc: "Energi kasih sayang universal, kedermawanan, dan penyelesaian. Anda peduli pada gambaran besar dan kesejahteraan banyak orang.",
                lesson: "Belajar melepaskan masa lalu dan memberi tanpa pamrih."
            },
            11: {
                keyword: "Master Illuminator",
                desc: "Intuisi tingkat tinggi dan pencerahan spiritual. Anda di sini untuk menginspirasi orang lain melalui visi idealis Anda.",
                lesson: "Menyeimbangkan saraf yang tegang dengan grounding."
            },
            22: {
                keyword: "Master Builder",
                desc: "Potensi mewujudkan mimpi besar menjadi kenyataan nyata untuk kemaslahatan banyak orang. Gabungan visi idealis dan praktikalitas.",
                lesson: "Mengatasi ketakutan akan kegagalan besar."
            },
            33: {
                keyword: "Master Teacher",
                desc: "Energi pengabdian dan cinta kasih tanpa syarat. Anda adalah penyembuh kosmik yang mengajarkan cinta melalui teladan.",
                lesson: "Tidak mengorbankan diri sendiri secara berlebihan."
            }
        };

        const karmicDebtsText = {
            13: "Hutang Kerja Keras (13/4): Arti (Masa Lalu): Indikasi bahwa di masa lalu ada kecenderungan bermalas-malasan, melimpahkan tanggung jawab kepada orang lain, mengambil jalan pintas, atau menyalahgunakan kata-kata untuk menghindari kerja keras. Tantangan Saat Ini: Anda mungkin merasa hidup ini lebih berat bagi Anda dibandingkan orang lain. Seringkali Anda merasa ada banyak rintangan yang muncul berulang kali, atau merasa frustrasi karena usaha tidak sebanding dengan hasil.Pelajaran Utama: Pelajaran tentang Disiplin, Fokus, dan Kerja Keras. Anda harus belajar menyelesaikan apa yang sudah dimulai. Jangan mengambil jalan pintas. Kunci sukses pemilik angka 13/4 adalah bekerja secara teratur, menjaga komitmen, dan menghadapi kesulitan dengan kepala tegak, bukan menghindarinya.",
            14: "Hutang Kebebasan (14/5): Arti (Masa Lalu): Berhubungan dengan penyalahgunaan kebebasan fisik atau indrawi. Mungkin di masa lalu ada sikap hedonisme, memanjakan hawa nafsu (makanan, alkohol, seks, dll) yang berlebihan, atau lari dari komitmen sehingga merugikan orang lain. Tantangan Saat Ini: Hidup Anda mungkin penuh dengan perubahan mendadak, ketidakstabilan, atau drama. Anda mungkin mudah bosan, sulit berkomitmen pada hubungan atau pekerjaan, dan rentan terhadap kecanduan atau impulsivitas. Pelajaran Utama: Pelajaran tentang Moderasi (Keseimbangan) dan Komitmen. Tugas Anda adalah tetap fleksibel namun tidak liar. Anda perlu belajar arti kebebasan yang sesungguhnya: kebebasan yang disertai tanggung jawab. Jangan lari dari masalah saat hal-hal menjadi sulit.",
            16: "Hutang Kehancuran Ego (16/7): Arti (Masa Lalu): Sering dikaitkan dengan penyalahgunaan cinta atau pengkhianatan. Mungkin ada ego yang sangat tinggi, meremehkan orang lain, atau terlibat dalam hubungan terlarang yang menghancurkan hati orang lain di masa lalu.Tantangan Saat Ini: Angka ini sering disebut sebagai The Tower (dalam Tarot). Anda mungkin mengalami fase di mana apa yang sudah Anda bangun (karir, hubungan, reputasi) tiba-tiba runtuh atau hancur lebur tanpa peringatan. Ini terjadi untuk menghancurkan ego Anda. Anda mungkin sering merasa kesepian atau terasing.Pelajaran Utama: Pelajaran tentang Kerendahan Hati dan Kebangkitan Spiritual. Tujuannya adalah menghancurkan kepalsuan atau kesombongan agar Anda bisa membangun ulang hidup di atas fondasi yang jujur dan spiritual. Anda diajarkan untuk tidak melekat pada hal duniawi dan mencari makna yang lebih tinggi (Ketuhanan/Semesta).",
            19: "Hutang Kekuasaan (19/1): Arti (Masa Lalu): Di masa lalu, ada indikasi penyalahgunaan kekuasaan, bertindak sebagai tiran, atau sikap egois yang ekstrem di mana Anda menolak bantuan orang lain atau merasa tidak butuh siapa pun.Tantangan Saat Ini: Anda sering merasa terisolasi atau merasa harus melakukan semuanya sendirian. Anda mungkin sulit sekali meminta tolong, bahkan saat sedang terpuruk. Anda sering terjebak dalam situasi di mana Anda harus berdiri sendiri melawan arus.Pelajaran Utama: Pelajaran tentang Interdependensi (Saling Ketergantungan). Meskipun Anda berbakat menjadi pemimpin mandiri, pelajaran utamanya adalah mengakui bahwa manusia adalah makhluk sosial. Anda harus belajar membuka hati, menerima bantuan orang lain, dan memahami kebutuhan orang lain, bukan hanya kebutuhan diri sendiri."
        };

        const personalYearText = {
            1: "Personal Year 1: Dengan energi perintis yang kuat, tema tahun ini adalah kemandirian dan inisiatif baru, di mana Anda harus mengatasi tantangan keraguan untuk melangkah sendirian dengan kunci sukses mengambil tindakan berani demi menanam benih siklus sembilan tahun ke depan.",
            2: "Personal Year 2: Didominasi energi pasif yang menuntut kesabaran, tema tahun ini adalah diplomasi dan kemitraan, yang menantang Anda untuk tidak merasa frustrasi saat kemajuan melambat, dengan kunci sukses menjaga keharmonisan relasi sambil menunggu waktu yang tepat.",
            3: "Personal Year 3: Membawa energi ekspresif yang ceria, tema tahun ini adalah kreativitas dan sosialisasi, di mana tantangan hilangnya fokus akibat terlalu banyak kesenangan harus diatasi dengan kunci sukses menyalurkan bakat seni serta memperluas jaringan pertemanan dengan optimisme.",
            4: "Personal Year 4: Mengusung energi praktis yang kaku, tema tahun ini adalah pembangunan fondasi dan ketertiban, yang menghadirkan tantangan rasa lelah atau terkekang oleh rutinitas, namun dapat ditaklukkan dengan kunci sukses disiplin kerja keras serta perhatian penuh pada detail teknis.",
            5: "Personal Year 5: Penuh dengan energi kebebasan yang eksplosif, tema tahun ini adalah perubahan mendadak dan petualangan, di mana tantangan ketidakstabilan impulsif harus diredam dengan kunci sukses bersikap fleksibel serta berani beradaptasi keluar dari zona nyaman.",
            6: "Personal Year 6: Mengalirkan energi pengasuhan yang hangat, tema tahun ini berpusat pada tanggung jawab keluarga dan pernikahan, yang mungkin terasa membebani emosi pribadi, namun akan berhasil jika Anda menerapkan kunci sukses melayani orang lain dengan cinta kasih dan komitmen tulus.",
            7: "Personal Year 7: Membawa energi spiritual yang tenang, tema tahun ini adalah introspeksi diri dan analisis mendalam, di mana tantangan rasa kesepian atau isolasi harus dihadapi dengan kunci sukses memanfaatkan waktu sendirian (solitude) untuk belajar, berdoa, atau mengevaluasi makna hidup.",
            8: "Personal Year 8: Memancarkan energi otoritas yang kuat, tema tahun ini adalah pencapaian materi dan karir, yang menguji Anda dengan tantangan ambisi berlebihan atau keserakahan, namun menjanjikan panen raya jika menggunakan kunci sukses pengelolaan manajemen yang efisien dan etis.",
            9: "Personal Year 9: Menandai energi penyelesaian siklus, tema tahun ini adalah pelepasan dan transformasi akhir, di mana tantangan sulitnya move on dari keterikatan lama harus diselesaikan dengan kunci sukses memaafkan masa lalu dan membersihkan hidup dari hal yang tak lagi berguna.",
            11: "Personal Year 11/2: Sebagai tahun master berenergi pencerahan tinggi, temanya adalah inspirasi spiritual dan intuisi tajam, yang membawa tantangan ketegangan saraf atau kecemasan berlebih, namun dapat dimenangkan dengan kunci sukses mempercayai firasat batin sambil tetap membumi dalam realitas.",
            22: "Personal Year 22/4: Membawa energi "Pembangun Agung" yang dahsyat, tema tahun ini adalah mewujudkan visi idealis berskala besar menjadi nyata, di mana tantangan tekanan beban kerja yang sangat berat harus dikelola dengan kunci sukses menggabungkan strategi visioner dan kerja praktis yang sistematis.",
            33: "Personal Year 33/6: Memancarkan energi pelayanan universal yang langka, tema tahun ini adalah pengorbanan penuh kasih untuk orang banyak, yang menantang batas kekuatan emosional Anda, namun memberi kepuasan jiwa melalui kunci sukses melayani kemanusiaan tanpa mengharap pamrih pribadi.",
        };

        // --- UTILS ---
        const charMap = {'A':1,'J':1,'S':1,'B':2,'K':2,'T':2,'C':3,'L':3,'U':3,'D':4,'M':4,'V':4,'E':5,'N':5,'W':5,'F':6,'O':6,'X':6,'G':7,'P':7,'Y':7,'H':8,'Q':8,'Z':8,'I':9,'R':9};
        const vowelsList = ['A','E','I','O','U'];

        function reduce(num, checkMaster=true) {
            let n = parseInt(num);
            if(checkMaster && [11,22,33].includes(n)) return {val:n, karmic:null};
            let karmic = null;
            let original = n;
            while(n>9) {
                if([13,14,16,19].includes(n)) karmic = n;
                n = n.toString().split('').reduce((a,b)=>parseInt(a)+parseInt(b),0);
                if(checkMaster && [11,22,33].includes(n)) return {val:n, karmic:karmic};
            }
            if([13,14,16,19].includes(original)) karmic = original;
            return {val:n, karmic:karmic};
        }

        function getSum(str) {
            return str.replace(/[^A-Z]/g,'').split('').reduce((acc,c)=>acc+(charMap[c]||0),0);
        }

        function getMeaning(num, type='general') {
            // Fallback for 0 or error
            if(!interpretations[num]) return "Energi unik dan kompleks.";
            if(type === 'lesson') return interpretations[num].lesson;
            if(type === 'keyword') return interpretations[num].keyword;
            return interpretations[num].desc;
        }

        function createCard(title, subtitle, resObj, type='general') {
            let karmicHtml = resObj.karmic ? `<div class="karmic-box">⚠️ <strong>Karmic Debt ${resObj.karmic}</strong><br>${karmicDebtsText[resObj.karmic]}</div>` : '';
            let tagHtml = resObj.karmic ? `<span class="tag tag-karmic">Karmic</span>` : '';
            if([11,22,33].includes(resObj.val)) tagHtml += `<span class="tag tag-master">Master</span>`;

            return `
            <div class="result-card">
                <div class="head-row">
                    <div class="big-num">${resObj.val}</div>
                    <div class="title-col">
                        <span>${subtitle}</span>
                        <h3>${title}</h3>
                        <div class="tag-area">${tagHtml}</div>
                    </div>
                </div>
                <div class="meaning">
                    <strong>${getMeaning(resObj.val, 'keyword')}</strong><br>
                    ${getMeaning(resObj.val, 'general')}
                </div>
                ${karmicHtml}
            </div>`;
        }

        // --- CALCULATION ---
        function calculateDeepProfile() {
            const fullName = document.getElementById('fullName').value.toUpperCase();
            const nickName = document.getElementById('nickName').value.toUpperCase();
            const dateInput = document.getElementById('birthDate').value;

            if(!fullName || !dateInput) { alert("Data tidak lengkap."); return; }

            const date = new Date(dateInput);
            const D = date.getDate(); const M = date.getMonth()+1; const Y = date.getFullYear();
            const curY = new Date().getFullYear();

            // 1. CORE
            const lpVal = reduce(reduce(D).val + reduce(M).val + reduce(Y).val);
            const birthVal = reduce(D, true);
            
            const cleanName = fullName.replace(/[^A-Z]/g,'');
            const vowels = cleanName.split('').filter(c=>vowelsList.includes(c)).join('');
            const consonants = cleanName.split('').filter(c=>!vowelsList.includes(c)).join('');

            const destVal = reduce(getSum(cleanName));
            const soulVal = reduce(getSum(vowels));
            const persVal = reduce(getSum(consonants));
            
            let minorVal = nickName ? reduce(getSum(nickName)) : {val:'-'};

            // RENDER CORE
            let coreHtml = '';
            coreHtml += createCard("Life Path Number", "Jalan Hidup Utama", lpVal);
            coreHtml += createCard("Expression (Destiny)", "Bakat & Potensi", destVal);
            coreHtml += createCard("Soul Urge", "Keinginan Hati", soulVal);
            coreHtml += createCard("Personality", "Citra Publik", persVal);
            coreHtml += createCard("Birthday Number", "Bakat Pendukung", birthVal);
            
            if(nickName) {
                coreHtml += `<div class="result-card" style="border-left-color:var(--blue-cycle);">
                    <div class="head-row"><div class="big-num">${minorVal.val}</div>
                    <div class="title-col"><h3>Minor Expression</h3><span>Energi Sehari-hari (${nickName})</span></div></div>
                    <div class="meaning">${getMeaning(minorVal.val)}</div>
                </div>`;
            }
            document.getElementById('coreResults').innerHTML = coreHtml;

            // 2. BRIDGE
            const matureVal = reduce(lpVal.val + destVal.val);
            const nameParts = fullName.split(' ').filter(p=>p.length>0);
            let balSum = 0; nameParts.forEach(p=>balSum+=charMap[p.charAt(0)]||0);
            const balVal = reduce(balSum);

            let bridgeHtml = '';
            bridgeHtml += createCard("Maturity Number", "Tujuan Usia Matang (40+)", matureVal);
            bridgeHtml += createCard("Balance Number", "Respon Terhadap Krisis", balVal);
            document.getElementById('bridgeResults').innerHTML = bridgeHtml;

            // 3. KARMIC LESSONS
            let present = new Set(cleanName.split('').map(c=>charMap[c]));
            let missing = [];
            for(let i=1; i<=9; i++) if(!present.has(i)) missing.push(i);
            
            let lessonHtml = '';
            if(missing.length === 0) lessonHtml = "<em>Tidak ada angka hilang. Jiwa yang lengkap (Well-rounded).</em>";
            else {
                missing.forEach(n => {
                    lessonHtml += `<div style="margin-bottom:10px;">
                        <span class="tag tag-karmic" style="font-size:0.9rem;">Angka ${n}</span>
                        <span style="font-size:0.9rem; color:#ccc;">${getMeaning(n, 'lesson')}</span>
                    </div>`;
                });
            }
            document.getElementById('lessonsArea').innerHTML = lessonHtml;
            document.getElementById('debtResults').innerHTML = ""; // Debts already inside Core Cards

            // 4. TIMING
            const pyVal = reduce(reduce(D).val + reduce(M).val + reduce(curY).val);
            let pyMeaning = personalYearText[pyVal.val] || personalYearText[reduce(pyVal.val, false).val] || "Transisi.";
            
            let timingHtml = `
            <div class="result-card" style="border-left-color:var(--blue-cycle);">
                <div class="head-row">
                    <div class="big-num">${pyVal.val}</div>
                    <div class="title-col"><span>Tema Tahun ${curY}</span><h3>Personal Year</h3></div>
                </div>
                <div class="meaning">${pyMeaning}</div>
            </div>`;
            document.getElementById('timingResults').innerHTML = timingHtml;

            // PINNACLES TABLE
            const bM = reduce(M,false).val; const bD = reduce(D,false).val; const bY = reduce(Y,false).val;
            const p1 = reduce(bM+bD).val; const p2 = reduce(bD+bY).val; const p3 = reduce(p1+p2).val; const p4 = reduce(bM+bY).val;
            const c1 = Math.abs(bM-bD); const c2 = Math.abs(bD-bY); const c3 = Math.abs(c1-c2); const c4 = Math.abs(bM-bY);
            
            let lpD = reduce(lpVal.val, false).val;
            const a1 = 36-lpD; const a2=a1+9; const a3=a2+9;

            document.getElementById('pinnacleBody').innerHTML = `
                <tr><td>Pinnacle 1</td><td>0 - ${a1}</td><td>${p1}</td><td>${c1}</td></tr>
                <tr><td>Pinnacle 2</td><td>${a1+1} - ${a2}</td><td>${p2}</td><td>${c2}</td></tr>
                <tr><td>Pinnacle 3</td><td>${a2+1} - ${a3}</td><td>${p3}</td><td>${c3}</td></tr>
                <tr><td>Pinnacle 4</td><td>${a3+1}+</td><td>${p4}</td><td>${c4}</td></tr>
            `;

            document.getElementById('resultArea').style.display = 'block';
            window.scrollTo({top: document.getElementById('resultArea').offsetTop - 50, behavior:'smooth'});
        }
    </script>
</body>
</html>
